{"version":3,"sources":["pages/SightWordsStudy.tsx","componens/study/SightWordsQuiz.tsx","componens/study/SightWordsEffect.tsx","stores/study/reducer.ts","stores/study/index.ts","layouts/StudyLayout.tsx","componens/study/AudioButton.tsx","assets/images/study sync /^/.*/.png$","assets/images/study/common sync /^/restart_.*/.png$","assets/images/study/common sync /^/game_.*/.png$","componens/study/Draggable.tsx"],"names":["QuizStatus","SightWordsQuiz","correct","wrong1","wrong2","onStudyClear","audioStop","useState","randomAr","setRandomAr","colorRandomAr","setColorRandomAr","words","setWords","container","useRef","correctAudio","wrongAudio","onDragCorrect","useCallback","item","area","areas","current","querySelectorAll","areaIdx","elementIndex","correctBlock","querySelector","stopAudio","play","length","addClass","onDragWrong","stop","useLayoutEffect","rand","makeRandom","colorRand","word","map","num","i","useEffect","Sound","from","url","require","default","preload","destroy","className","ref","Draggable","areaAr","areaElm","dragAr","dragElm","onDragStart","onCorrect","onWrong","padding","POSITION","x","y","SightWordsEffect","stars","rand1","rand2","forEach","star","PARTICLE_NUM","scale","randomRange","rotation","delay","duration","gsap","set","opacity","to","ease","Cubic","easeOut","Array","k","Study","idx","dispatch","useDispatch","studyData","useSelector","state","status","activeIndex","data","list","INIT","quizStatus","setQuizStatus","audio","audioBtn","viewActive","setViewActive","isClear","setIsClear","timer","audioFinish","START","type","StudyActions","CHANGE_STATUS","payload","StudyStatus","STUDY_END","STUDY_START","clearTimeout","setTimeout","INTRO","STUDY_TRANSITION","RESULT","AudioButton","src","left","top","disabled","SightWordsStudy","stage","id","store","Store","StudyLayout","title","parseInt","showGameBtn","studyElem","InitialState","currentPage","clearPages","totalPage","Reducer","action","SET_CURRENT_PAGE","SET_ACTIVE_INDEX","SET_CLEAR_PAGE","RESTART","reStudy","middlewares","thunk","createStore","applyMiddleware","registerPlugin","MotionPathPlugin","introRef","studyRef","listConRef","listRef","resultRef","clickAudio","goodJobAudio","clapAudio","prevPage","indexAr","onClickStart","e","parentElement","removeClass","getIndex","onIntroExit","easeInOut","titleBar","textCon","pageCon","force3D","height","onIntroExited","onPrevPage","onNextPage","path","window","isTestAPI","t","toLowerCase","http","get","params","fu_id","play_type","then","console","log","onResultEnter","deco","circle","charactor","star1","star2","star3","scaleX","scaleY","btn2","btn","Back","config","onComplete","style","transform","willChange","repeat","yoyo","Linear","easeNone","onClickRestudy","killTweensOf","onClickGame","getContentX","innerWidth","findIdx","onResize","wrap","document","width","introBg","studyBg","resultBg","onVisibleChange","hidden","sound","pauseAll","resumeAll","onExitApp","self","close","Power2","find","addEventListener","removeEventListener","getCookie","langCode","READY","contentWidth","contentHeight","nodeRef","in","timeout","exit","appear","unmountOnExit","onExit","onExited","dangerouslySetInnerHTML","__html","stageTitle","color","during","onClick","li","el","onEnter","forwardRef","onBeforeClick","onAfterClick","isPlay","setIsPlay","undefined","onBtnClick","useImperativeHandle","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","keys","Object","resolve","module","exports","dragContainer","dragItems","dragAreas","draggables","checkHitArea","draggable","dragItem","areaItem","getComputedStyle","hitTest","dataset","returnDrag","traget","dist","distance","draggble","enable","GSAPDraggable","create","bounds","this","target","filter","disable","onDrag","hitArea","onDragEnd","drag","kill"],"mappings":"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","file":"static/js/13.c24a047d.chunk.js","sourcesContent":["import { FC, useCallback, useEffect, useRef, useState } from 'react';\r\nimport { Provider, useDispatch, useSelector } from \"react-redux\";\r\nimport Store from '../stores/study';\r\nimport { StudyActions, StudyStatus } from '../stores/study/reducer';\r\nimport StudyLayout from '../layouts/StudyLayout';\r\nimport AudioButton, { Refs as AudioButtonRefs } from '../componens/study/AudioButton';\r\nimport { Sound } from '@pixi/sound';\r\nimport SightWordsQuiz from '../componens/study/SightWordsQuiz';\r\nimport SightWordsEffect from '../componens/study/SightWordsEffect';\r\n\r\nimport '../assets/scss/study-common.scss';\r\nimport '../assets/scss/study-sight-words.scss';\r\n\r\n\r\n\r\nenum QuizStatus {\r\n   INIT = 'INIT',\r\n   INTRO = 'INTRO',\r\n   START = 'START'\r\n}\r\n\r\nconst Study: FC<{idx: number}> = ({ idx }) => {\r\n\r\n   const dispatch = useDispatch();\r\n   const studyData: any = useSelector<any>(state => state.studyData);\r\n   const status: any = useSelector<any>(state => state.status);\r\n   const activeIndex: any = useSelector<any>(state => state.activeIndex);\r\n   const data = studyData.list[idx-1];\r\n\r\n   const [quizStatus, setQuizStatus] = useState<QuizStatus>(QuizStatus.INIT);\r\n   const audio = useRef<Sound|null>(null);\r\n   const audioBtn = useRef<AudioButtonRefs>(null);\r\n   const [viewActive, setViewActive] = useState<boolean>(false);\r\n   const [isClear, setIsClear] = useState<boolean>(false);\r\n   const timer = useRef<any>();\r\n\r\n   const audioFinish = () => {\r\n      setQuizStatus(QuizStatus.START);\r\n      setViewActive(false);\r\n   };\r\n\r\n   const stopAudio = () => {\r\n      audio.current?.stop();\r\n      setViewActive(false);\r\n   }\r\n\r\n   const onStudyClear = useCallback(() => {\r\n      dispatch({ \r\n         type: StudyActions.CHANGE_STATUS, \r\n         payload: StudyStatus.STUDY_END\r\n      });\r\n      setIsClear(true);\r\n   }, []);\r\n\r\n   useEffect(() => {\r\n      if(status === StudyStatus.STUDY_START) {\r\n         clearTimeout(timer.current);\r\n         if(idx === activeIndex + 1) {\r\n            timer.current = setTimeout(()=>{\r\n               setQuizStatus(QuizStatus.INTRO);\r\n            }, 500);\r\n         } else {\r\n            setIsClear(false);\r\n            setQuizStatus(QuizStatus.INIT);\r\n            stopAudio();\r\n         }\r\n      } else if(status === StudyStatus.STUDY_TRANSITION || status === StudyStatus.RESULT) {\r\n         clearTimeout(timer.current);\r\n         stopAudio();\r\n      }\r\n   },[status]);\r\n\r\n   useEffect(() => {\r\n      if(quizStatus === QuizStatus.INTRO) {\r\n         timer.current = setTimeout(()=>{\r\n            audio.current?.play(audioFinish);\r\n            setViewActive(true);\r\n         }, 500);\r\n      }\r\n   }, [quizStatus]);\r\n\r\n   useEffect(() => {\r\n      audio.current = Sound.from({url: data.audio, preload: true});\r\n   }, []);\r\n\r\n   \r\n   return (\r\n      <>\r\n         <div className={`quiz-view ${viewActive ? 'active': ''} ${isClear ? 'clear' : ''}`}>\r\n            <AudioButton\r\n               ref={audioBtn}\r\n               src={data.audio} \r\n               left={'185px'}\r\n               top={'4px'}\r\n               disabled={\r\n                  quizStatus === QuizStatus.INIT || \r\n                  quizStatus === QuizStatus.INTRO\r\n               } />\r\n            <div className=\"puzzle-con\">\r\n               <span className=\"glow\"></span>\r\n               <div className='text-con'>{data.correct}</div>\r\n            </div>\r\n\r\n            {quizStatus === QuizStatus.START &&\r\n               <SightWordsQuiz\r\n                  correct={data.correct}\r\n                  wrong1={data.wrong1}\r\n                  wrong2={data.wrong2}\r\n                  onStudyClear={onStudyClear}\r\n                  audioStop={() => audioBtn.current?.stop()} />\r\n            }\r\n            {isClear && \r\n               <SightWordsEffect />\r\n            }\r\n         </div>\r\n      </>\r\n   );\r\n}\r\n\r\n\r\nconst SightWordsStudy: FC<{stage: string | null}> = ({stage}) => {\r\n   return (\r\n      <div id=\"wrap\">\r\n         <Provider store={Store}>\r\n            <StudyLayout \r\n               title=\"Tap Tap Dinos\"\r\n               type=\"SightWords\"\r\n               stage={stage ? parseInt(stage) : 1}\r\n               showGameBtn={true}\r\n               studyElem={idx => <Study idx={idx} />} />\r\n         </Provider>\r\n      </div>\r\n   )\r\n}\r\n\r\nexport default SightWordsStudy;","import { FC, useCallback, useEffect, useLayoutEffect, useRef, useState } from 'react';\r\nimport { makeRandom, addClass, elementIndex } from '../../utils';\r\nimport Draggable from './Draggable';\r\nimport { Sound } from '@pixi/sound';\r\n\r\nexport interface Props {\r\n   correct: string;\r\n   wrong1: string;\r\n   wrong2: string;\r\n   onStudyClear: () => void;\r\n   audioStop: () => void;\r\n}\r\n\r\nconst SightWordsQuiz: FC<Props> = ({ correct, wrong1, wrong2, onStudyClear, audioStop }) => {\r\n\r\n   const [randomAr, setRandomAr] = useState<number[]>();\r\n   const [colorRandomAr, setColorRandomAr] = useState<number[]>();\r\n   const [words, setWords] = useState<string[]>();\r\n   const container = useRef<HTMLDivElement>(null);\r\n   const correctAudio = useRef<Sound>();\r\n   const wrongAudio = useRef<Sound>();\r\n\r\n   \r\n\r\n   const onDragCorrect = useCallback((item: HTMLDivElement, area: HTMLDivElement) => {\r\n      const areas = container.current?.querySelectorAll('.drag-area.active');\r\n      const areaIdx = elementIndex(area);\r\n      const correctBlock = container.current?.querySelector(`.correct-block.block${areaIdx+1}`);\r\n      stopAudio();\r\n      correctAudio.current?.play(() => {\r\n         if(areas!.length == 2) {\r\n            onStudyClear();\r\n            addClass(container.current, 'clear');\r\n         }\r\n      });\r\n      addClass(correctBlock, 'active');\r\n      if(areas!.length == 2) {\r\n         addClass(container.current, 'disable');\r\n      }\r\n   }, []);\r\n\r\n   const onDragWrong = useCallback((item: HTMLDivElement) => {\r\n      stopAudio();\r\n      wrongAudio.current!.play();\r\n   }, []);\r\n\r\n   const stopAudio = useCallback(() => {\r\n      correctAudio.current!.stop();\r\n      wrongAudio.current!.stop();\r\n   }, []);\r\n\r\n   useLayoutEffect(() => {\r\n      const rand = makeRandom(4, 4);\r\n      const colorRand = makeRandom(4, 4);\r\n      setRandomAr(rand);\r\n      setColorRandomAr(colorRand);\r\n      const word = rand.map((num, i) => {\r\n         if(i === 0)       return correct;\r\n         else if(i === 1)  return correct;\r\n         else if(i === 2)  return wrong1;\r\n         else              return wrong2;\r\n      });\r\n      setWords(word);\r\n   },[]);\r\n\r\n   useEffect(() => {\r\n      correctAudio.current = Sound.from({url: require('../../assets/audio/correct.mp3').default, preload: true});\r\n      wrongAudio.current = Sound.from({url: require('../../assets/audio/wrong4.mp3').default, preload: true});\r\n      return () => {\r\n         correctAudio.current?.destroy();\r\n         wrongAudio.current?.destroy();\r\n      }\r\n   }, []);\r\n\r\n   return (\r\n      <div className=\"sightwords-quiz\" ref={container}>\r\n         {(randomAr && words && colorRandomAr) && \r\n            <>\r\n               <div className=\"correct-block block1\" data-color={colorRandomAr[0]}><span>{words[0]}</span></div>\r\n               <div className=\"correct-block block2\" data-color={colorRandomAr[1]}><span>{words[1]}</span></div>\r\n               <Draggable \r\n                  areaAr={[0, 1]}\r\n                  areaElm={randomAr.map( i => <span></span>)}\r\n                  dragAr={randomAr}\r\n                  dragElm={randomAr.map( i => (\r\n                     <div data-color={colorRandomAr[i]}><span>{words[i]}</span></div>\r\n                  ))}\r\n                  onDragStart={audioStop}\r\n                  onCorrect={onDragCorrect}\r\n                  onWrong={onDragWrong}\r\n                  padding={'20%'} />\r\n            </>\r\n         }\r\n      </div>\r\n   );\r\n}\r\n\r\nexport default SightWordsQuiz;","import { FC, useEffect, useRef } from 'react';\r\nimport { addClass, makeRandom, randomRange } from '../../utils';\r\nimport { gsap, Cubic } from 'gsap';\r\n\r\nconst PARTICLE_NUM = 10;\r\nconst POSITION = [\r\n   {x: -212, y: 300},\r\n   {x: -191, y: 220},\r\n   {x: -236, y: 253},\r\n   {x: -161, y: 250},\r\n   {x: -136, y: 166},\r\n   {x: 245, y: 311},\r\n   {x: 213, y: 275},\r\n   {x: 166, y: 302},\r\n   {x: 176, y: 197},\r\n   {x: 240, y: 195},\r\n];\r\n\r\nconst SightWordsEffect: FC = () => {\r\n\r\n   const container = useRef<HTMLDivElement>(null);\r\n   const stars = useRef<HTMLDivElement[]>([]);\r\n\r\n   useEffect(() => {\r\n      const rand1 = makeRandom(5, 5);\r\n      const rand2 = makeRandom(5, 5);\r\n      \r\n      stars.current.forEach((star, i) => {\r\n         const num = i % 5;\r\n        \r\n         if(i < PARTICLE_NUM/2){\r\n            addClass(star, `star${rand1[num]+1}`);\r\n         } else {\r\n            addClass(star, `star${rand2[num]+1}`);\r\n         }\r\n\r\n         const scale = randomRange(20, 50) * 0.01;\r\n         const rotation = randomRange(0, 180) * 0.01;\r\n         const delay = randomRange(0, 30) * 0.01;\r\n         const duration = randomRange(50, 100) * 0.01;\r\n         gsap.set(star, {scale: scale, rotation: rotation, opacity: 0, x: POSITION[i].x, y: POSITION[i].y});\r\n         gsap.to(star, 0.3, {delay: delay, opacity: 1});\r\n         gsap.to(star, duration, {\r\n            delay: delay,\r\n            scale: randomRange(70, 100) * 0.01,\r\n            rotation: `+=${randomRange(-180, 180)}`,\r\n            ease: Cubic.easeOut\r\n         });\r\n         gsap.to(star, 0.3, {delay: delay + duration-0.3, opacity: 0});\r\n         \r\n      });\r\n   }, []);\r\n\r\n   return (\r\n      <div className=\"effect-con\" ref={container}>\r\n         {Array.from(Array(PARTICLE_NUM), (k, i) => (\r\n            <div className=\"star\" key={`star-${i}`} ref={ref => ref && (stars.current[i] = ref)}></div>\r\n         ))}\r\n      </div>\r\n   );\r\n}\r\n\r\nexport default SightWordsEffect;","\r\nexport enum StudyStatus {\r\n   INIT = 'INIT',\r\n   READY = 'READY',\r\n   START = 'START',\r\n   STUDY_START = 'STUDY_START',\r\n   STUDY_END = 'STUDY_END',\r\n   STUDY_TRANSITION = 'STUDY_TRANSITION',\r\n   RESULT = 'RESULT',\r\n   RESTART = 'RESTART'\r\n}\r\n\r\nexport enum StudyActions {\r\n   INIT = 'INIT',\r\n   CHANGE_STATUS = 'CHANGE_STATUS',\r\n   SET_CURRENT_PAGE = 'SET_CURRENT_PAGE',\r\n   SET_ACTIVE_INDEX = 'SET_ACTIVE_INDEX',\r\n   SET_CLEAR_PAGE = 'SET_CLEAR_PAGE',\r\n   RESTART = 'RESTART'\r\n}\r\n\r\nexport type ActionTypes = {\r\n   type: string;\r\n   payload: any;\r\n}\r\n\r\nexport type StateTypes = {\r\n   status: StudyStatus,    // 학습 상태\r\n   stage: number;          // 학습 스테이지\r\n   currentPage: number;    // 현재 페이지   \r\n   activeIndex: number;    // 현재 활성 인덱스 ( 랜덤으로 문제가 나옴으로 currentPage와 인덱스가 다름 )\r\n   clearPages: number[];   // 완료한 페이지 배열\r\n   totalPage: number;      // 전체 페이지 수\r\n   studyData: any | null;  // api에서 가져온 학습 데이터\r\n}\r\n\r\nexport const InitialState = {\r\n   status: StudyStatus.INIT,\r\n   stage: 1,\r\n   currentPage: 1,\r\n   activeIndex: 0,\r\n   clearPages: [],\r\n   totalPage: 0,\r\n   studyData: null,\r\n}\r\n\r\nexport const Reducer = ( state: StateTypes = InitialState, action: ActionTypes ) => {\r\n   switch( action.type ) {\r\n      case StudyActions.INIT :\r\n         return {...state, ...action.payload };\r\n      case StudyActions.SET_CURRENT_PAGE :\r\n         return {...state, currentPage: action.payload};\r\n      case StudyActions.SET_ACTIVE_INDEX :\r\n         return {...state, activeIndex: action.payload};   \r\n      case StudyActions.CHANGE_STATUS :\r\n         return {...state, status: action.payload };\r\n      case StudyActions.SET_CLEAR_PAGE :\r\n         return {...state, clearPages: [...state.clearPages, action.payload]};\r\n      case StudyActions.RESTART :\r\n         return {\r\n            ...state, \r\n            status: StudyStatus.RESTART, \r\n            currentPage: 1, \r\n            studyData: { ...state.studyData, reStudy: true } \r\n         };\r\n      default : \r\n         return state; \r\n   }\r\n}\r\n","import Redux, { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { Reducer } from './reducer';\r\n\r\nconst env = process.env.NODE_ENV;\r\nconst middlewares = [thunk];\r\nif(env === 'development') {\r\n   const { logger } = require(\"redux-logger\");\r\n   middlewares.push(logger);\r\n}\r\n\r\nlet store: Redux.Store;\r\n\r\nif(env === 'development') {\r\n   const composeWithDevTools = require('redux-devtools-extension').composeWithDevTools;\r\n   store = createStore(Reducer, composeWithDevTools(applyMiddleware(...middlewares)));\r\n} else {\r\n   store = createStore(Reducer, applyMiddleware(...middlewares));\r\n}\r\n\r\nexport default store;","import { FC, ReactElement, useCallback, useEffect, useLayoutEffect, useRef } from 'react';\r\nimport { Helmet, HelmetProvider } from 'react-helmet-async';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport CommonLayout from './CommonLayout';\r\nimport { StudyActions, StudyStatus } from '../stores/study/reducer';\r\nimport { Transition  } from 'react-transition-group';\r\nimport { gsap, Cubic, Power2, Back, Linear } from 'gsap';\r\nimport { sound } from '@pixi/sound';\r\nimport Ripples from 'react-ripples';\r\nimport { getCookie, addClass, makeRandom, removeClass } from '../utils';\r\n\r\nimport Draggable from \"gsap/Draggable\";\r\nimport { MotionPathPlugin } from 'gsap/all';\r\nimport { Sound } from '@pixi/sound';\r\n\r\ngsap.registerPlugin(Draggable);\r\ngsap.registerPlugin(MotionPathPlugin);\r\n\r\n\r\nconst CONTENT_WIDTH = 960;\r\nconst CONTENT_HEIGHT = 600;\r\n\r\n\r\n/*\r\n* @ PROPS\r\n*     title: 학습 타이틀\r\n*     stage: 학습 스테이지 숫자\r\n*     type: 학습 종류\r\n*     studyElem: 학습 jsx element\r\n*/\r\nexport interface Prors {\r\n   title: string;\r\n   stage: number;\r\n   type: string;\r\n   studyElem: (idx: number) => ReactElement;\r\n   showGameBtn?: boolean;\r\n}\r\n\r\nconst StudyLayout: FC<Prors> = ({ title, stage, type, studyElem, showGameBtn }) => {\r\n\r\n   const dispatch = useDispatch();\r\n   const studyData: any = useSelector<any>(state => state.studyData);\r\n   const status: any = useSelector<any>(state => state.status);\r\n   const currentPage: any = useSelector<any>(state => state.currentPage);\r\n   const totalPage: any = useSelector<any>(state => state.totalPage);\r\n   const clearPages: any = useSelector<any>(state => state.clearPages);\r\n\r\n   const introRef = useRef<HTMLDivElement>(null);\r\n   const studyRef = useRef<HTMLDivElement>(null);\r\n   const listConRef = useRef<HTMLDivElement>(null);\r\n   const listRef = useRef<Array<HTMLDivElement>>([]);\r\n   const resultRef = useRef<HTMLDivElement>(null);\r\n   const clickAudio = useRef<Sound>();\r\n   const goodJobAudio = useRef<Sound>();\r\n   const clapAudio = useRef<Sound>();\r\n   const prevPage = useRef<number>(1);\r\n   const indexAr = useRef<number[]>([]);\r\n   \r\n\r\n\r\n   const onClickStart = useCallback(( e ) => {\r\n      clickAudio.current!.play();\r\n      addClass(introRef.current?.querySelector('.start-btn')?.parentElement, 'disable');\r\n      \r\n      if(studyData.reStudy === 0) {\r\n         indexAr.current = Array.from(Array(totalPage)).map((x,i) => i);\r\n      } else {\r\n         indexAr.current = makeRandom(totalPage, totalPage);\r\n      }\r\n\r\n      removeClass(listRef.current[getIndex(0)], 'hidden');\r\n      dispatch({ type: StudyActions.SET_ACTIVE_INDEX, payload: getIndex(currentPage - 1)});\r\n      setTimeout(() => {\r\n         dispatch({ type: StudyActions.CHANGE_STATUS, payload: StudyStatus.START });\r\n      },500);\r\n   }, [totalPage]);\r\n\r\n   const onIntroExit = useCallback(() => {\r\n      gsap.to(introRef.current, 0.3, {opacity: 0, ease: Cubic.easeInOut});\r\n      setTimeout(() => {\r\n         const titleBar = studyRef.current!.querySelector('.title-bar');\r\n         const textCon = titleBar!.querySelector('.text-con');\r\n         const pageCon = titleBar!.querySelector('.page-con');\r\n         gsap.to(titleBar, 0.6, {force3D: true, height: 85, ease: Cubic.easeInOut});\r\n         gsap.from(textCon, 0.6, {force3D: true, y: 50, ease: Cubic.easeInOut});\r\n         gsap.from(pageCon, 0.6, {force3D: true, y: 50, ease: Cubic.easeInOut});\r\n      }, 100);\r\n   }, []);\r\n\r\n   const onIntroExited = useCallback(() => {\r\n      dispatch({ \r\n         type: StudyActions.CHANGE_STATUS, \r\n         payload: StudyStatus.STUDY_START\r\n      });\r\n   }, []);\r\n\r\n   const onPrevPage = useCallback(( e ) => {\r\n      if(currentPage > 0) {\r\n         clickAudio.current!.play();\r\n         setTimeout(()=>{\r\n            dispatch({ type: StudyActions.SET_CURRENT_PAGE, payload: currentPage - 1});\r\n            dispatch({ type: StudyActions.SET_ACTIVE_INDEX, payload: getIndex(currentPage - 2)});\r\n            dispatch({ type: StudyActions.CHANGE_STATUS, payload: StudyStatus.STUDY_TRANSITION });\r\n         });\r\n      }\r\n   },[currentPage, totalPage]);\r\n\r\n   const onNextPage = useCallback(( e ) => {\r\n      if(currentPage < totalPage) {\r\n         clickAudio.current!.play();\r\n         setTimeout(()=>{\r\n            dispatch({ type: StudyActions.SET_CURRENT_PAGE, payload: currentPage + 1});\r\n            dispatch({ type: StudyActions.SET_ACTIVE_INDEX, payload: getIndex(currentPage)});\r\n            dispatch({ type: StudyActions.CHANGE_STATUS, payload: StudyStatus.STUDY_TRANSITION });\r\n         });\r\n      } else {\r\n         let path = '';\r\n         if (window.isTestAPI) {\r\n            path = `/study${type}/history`;\r\n         }\r\n         else {\r\n            let t = type.toLowerCase();\r\n            if(t === 'words') t = 'word';\r\n            path = `/game/${t}/history`;\r\n         }\r\n         if(studyData.reStudy === 0) {\r\n            window.http\r\n            .get(path, { params: {fu_id: studyData.fu_id, play_type: 'L', stage: stage }})\r\n            .then((data) => console.log(data));\r\n         }\r\n         dispatch({ type: StudyActions.CHANGE_STATUS, payload: StudyStatus.RESULT });\r\n      }\r\n   },[currentPage, totalPage]);\r\n   \r\n\r\n   const onResultEnter = useCallback(() => {\r\n      const title = resultRef.current?.querySelector('.good-job') as HTMLDivElement;\r\n      const deco = resultRef.current?.querySelector('.deco') as HTMLDivElement;\r\n      const circle = resultRef.current?.querySelector('.circle') as HTMLDivElement;\r\n      const charactor = resultRef.current?.querySelector('.charactor') as HTMLDivElement;\r\n      const star1 = resultRef.current?.querySelector('.star1') as HTMLDivElement;\r\n      const star2 = resultRef.current?.querySelector('.star2') as HTMLDivElement;\r\n      const star3 = resultRef.current?.querySelector('.star3') as HTMLDivElement;\r\n\r\n      \r\n      removeClass(title, 'hidden');\r\n      removeClass(deco, 'hidden');\r\n      removeClass(circle, 'hidden');\r\n      removeClass(charactor, 'hidden');\r\n     \r\n      \r\n      gsap.set(title!, {opacity: 0, force3D:true, scaleX:0, scaleY: 0});\r\n      gsap.set(deco!, {force3D:true, scaleX: 0.5, scaleY: 0.5, opacity: 0});\r\n      gsap.set(circle!, {opacity: 0, force3D:true, scaleX:0.2, scaleY: 0.2});\r\n      gsap.set(charactor!, {force3D:true, y:300, rotation: -50});\r\n      const btn = resultRef.current?.querySelector('.restudy-btn') as HTMLButtonElement;\r\n      gsap.set(btn!, {opacity: 0});\r\n      let btn2: HTMLButtonElement;\r\n      if(showGameBtn){\r\n         btn2 = resultRef.current?.querySelector('.game-btn') as HTMLButtonElement;\r\n         gsap.set(btn2, {opacity: 0});\r\n      }\r\n      gsap.set(resultRef.current, {opacity: 0});\r\n\r\n      gsap.to(resultRef.current, 0.6, {opacity: 1});\r\n      gsap.to(title!, 0.6, {delay: 0.5, scaleX: 1, scaleY: 1, opacity:1, ease: Back.easeOut.config(2), onComplete: ()=> {\r\n         title!.style.transform = '';\r\n         title!.style.willChange = 'transform';\r\n      }});\r\n      gsap.to(deco!, 1, {delay: 1.2, scaleX: 1, scaleY: 1, opacity:1, ease: Back.easeOut.config(1.5), onComplete: ()=> {\r\n         deco!.style.transform = '';\r\n      }});\r\n      gsap.to(circle!, 0.6, {delay: 0.8, force3D:true, scaleX: 1, scaleY:1, opacity: 1, ease: Back.easeOut.config(2)});\r\n      gsap.to(charactor!, 0.5, {delay: 1.2, force3D:true, y: 0, rotation:0, ease: Back.easeOut.config(1.2), onComplete: ()=>{\r\n         removeClass(btn, 'disable');\r\n         gsap.to(btn!, 0.6, {opacity: 1});\r\n         if(showGameBtn){\r\n            removeClass(btn2, 'disable');\r\n            gsap.to(btn2, 0.6, {opacity: 1});\r\n         }\r\n         gsap.to(charactor!, 0.5, {delay: 0.1, scale: 1.03, repeat: -1, yoyo: true, ease: Linear.easeNone});\r\n      }});\r\n      gsap.set(star1!, {x: 106, y: 7});\r\n      gsap.set(star2!, {x: 67, y: 80});\r\n      gsap.set(star3!, {x: 130, y: 90});\r\n      gsap.to(star1!, 0.6, {delay: 1.2, opacity: 1, x:0, y:0, ease: Back.easeOut.config(2), onComplete: ()=> {\r\n         star1!.style.transform = '';\r\n      }});\r\n      gsap.to(star2!, 0.6, {delay: 1.2, opacity: 1, x:0, y:0, ease: Back.easeOut.config(2), onComplete: ()=> {\r\n         star2!.style.transform = '';\r\n      }});\r\n      gsap.to(star3!, 0.6, {delay: 1.2, opacity: 1, x:0, y:0, ease: Back.easeOut.config(2), onComplete: ()=> {\r\n         star3!.style.transform = '';\r\n      }});\r\n\r\n      goodJobAudio.current!.play();\r\n      clapAudio.current!.play();\r\n   },[]);\r\n\r\n\r\n   const onClickRestudy = useCallback(( e ) => {\r\n      clickAudio.current!.play();\r\n      addClass(resultRef.current?.querySelector('.restudy-btn')?.parentElement, 'disable');\r\n      if(showGameBtn){\r\n         addClass(resultRef.current?.querySelector('.game-btn')?.parentElement, 'disable');\r\n      }\r\n      setTimeout(() => {\r\n         gsap.killTweensOf('*');\r\n         dispatch({ type: StudyActions.RESTART});\r\n      }, 600);\r\n   },[]);\r\n\r\n   const onClickGame = useCallback((e) => {\r\n      clickAudio.current!.play();\r\n      // addClass(resultRef.current?.querySelector('.restudy-btn')?.parentElement, 'disable');\r\n      // addClass(resultRef.current?.querySelector('.game-btn')?.parentElement, 'disable');\r\n      // setTimeout(() => {\r\n         \r\n      // }, 600);\r\n   }, []);\r\n\r\n\r\n   const getContentX = useCallback((idx: number) => {\r\n      const x = (CONTENT_WIDTH + ((window.innerWidth - (CONTENT_WIDTH * window.scale)) / 2)) * idx;\r\n      return x ? x : 0;\r\n   }, []);\r\n\r\n   const getIndex = useCallback(( idx ): number  => {\r\n      let findIdx = 0;\r\n      for(let i = 0; i<indexAr.current.length; i++){\r\n         if(indexAr.current[i] === idx) {\r\n            findIdx = i; \r\n            break;\r\n         }\r\n      }\r\n      return findIdx;\r\n   },[]);\r\n\r\n\r\n   const onResize = useCallback(() => {\r\n      setTimeout(()=> {\r\n         const wrap = document.querySelector('#content-wrap') as HTMLDivElement;\r\n         if(wrap) {\r\n            const left = parseInt(wrap.style.left) * (1/window.scale);\r\n            const width =  window.innerWidth * (1/window.scale);\r\n            if(listRef.current){\r\n               listRef.current.forEach((list, i) => list && (list.style.left=`${getContentX(indexAr.current[i])}px`));\r\n               gsap.set(listConRef.current, {x: -getContentX(prevPage.current-1)});\r\n            }\r\n            if(introRef.current){\r\n               const introBg = introRef.current.querySelector('.bg') as HTMLDivElement;\r\n               introBg.style.width = `${width}px`;\r\n               introBg.style.left = `${-left}px`;\r\n            }\r\n            if(studyRef.current){\r\n               const titleBar = studyRef.current.querySelector('.title-bar') as HTMLDivElement;\r\n               const studyBg = studyRef.current.querySelector('.bg') as HTMLDivElement;\r\n               titleBar.style.width = `${width}px`;\r\n               titleBar.style.left = `${-left}px`;\r\n               studyBg.style.width = `${width}px`;\r\n               studyBg.style.left = `${-left}px`;\r\n            }\r\n            if(resultRef.current){\r\n               const resultBg = resultRef.current.querySelector('.bg') as HTMLDivElement;\r\n               resultBg.style.width = `${width}px`;\r\n               resultBg.style.left = `${-left}px`;\r\n            }\r\n            const exitBtn = document.querySelector('#exit-button') as HTMLDivElement\r\n            exitBtn.style.left = `${900+left}px`;\r\n         }\r\n      }, 2);\r\n   },[]);\r\n\r\n   const onVisibleChange = useCallback(( e ) => {\r\n      if(document.hidden) {\r\n         sound.pauseAll();\r\n      } else {\r\n         sound.resumeAll();\r\n      }\r\n   }, []);\r\n\r\n   const onExitApp = useCallback(( e ) => {\r\n      clickAudio.current!.play();\r\n      window.self.close();\r\n      console.log('ExitApp');\r\n   }, []);\r\n\r\n\r\n   useEffect(() => {\r\n      switch(status) {\r\n         case StudyStatus.STUDY_TRANSITION : \r\n            removeClass(listRef.current[getIndex(currentPage-1)], 'hidden');\r\n            if(prevPage.current > currentPage) {\r\n               removeClass(listRef.current[getIndex(currentPage)], 'hidden');\r\n            } else {\r\n               removeClass(listRef.current[getIndex(currentPage-2)], 'hidden');\r\n            }\r\n            gsap.killTweensOf(listConRef.current);\r\n            gsap.to(listConRef.current, 0.6, {delay:0.03, x: -getContentX(currentPage-1), ease: Power2.easeOut, force3D: true, \r\n               onComplete: () => {\r\n                  listRef.current.forEach((list, i) => {\r\n                     if(getIndex(currentPage-1) !== i){\r\n                        addClass(list, 'hidden')\r\n                     }\r\n                  });\r\n               } \r\n            });\r\n            setTimeout(() => {\r\n               dispatch({ \r\n                  type: StudyActions.CHANGE_STATUS, \r\n                  payload: StudyStatus.STUDY_START\r\n               });\r\n            }, 100);\r\n            prevPage.current = currentPage;\r\n         break;\r\n         case StudyStatus.STUDY_END : \r\n            if(!clearPages.find((x: number) => x === currentPage)) {\r\n               dispatch({type: StudyActions.SET_CLEAR_PAGE, payload: currentPage});\r\n            }\r\n         break;\r\n         case StudyStatus.RESULT : \r\n            onResize();\r\n         break;\r\n         case StudyStatus.RESTART : \r\n            const titleBar = studyRef.current!.querySelector('.title-bar');\r\n            gsap.set(titleBar, {force3D: true, height: 85});\r\n            indexAr.current = makeRandom(totalPage, totalPage);\r\n            prevPage.current = 1;\r\n            removeClass(listRef.current[getIndex(0)], 'hidden');\r\n            onResize();\r\n            dispatch({ type: StudyActions.SET_ACTIVE_INDEX, payload: getIndex(currentPage - 1)});\r\n            setTimeout(() => {\r\n               dispatch({ \r\n                  type: StudyActions.CHANGE_STATUS, \r\n                  payload: StudyStatus.STUDY_START\r\n               });\r\n            }, 10);\r\n         break;\r\n      }\r\n   },[status]);\r\n\r\n\r\n   useEffect(() => {\r\n      window.addEventListener('resize', onResize);\r\n      document.addEventListener('visibilitychange', onVisibleChange);\r\n      onResize();\r\n      return () => {\r\n         window.removeEventListener('resize', onResize);\r\n         document.removeEventListener('visibilitychange', onVisibleChange);\r\n      }\r\n   }, []);\r\n\r\n\r\n   useLayoutEffect(() => {\r\n      clickAudio.current = Sound.from({url: require('../assets/audio/click.mp3').default, preload: true});\r\n      goodJobAudio.current = Sound.from({url: require('../assets/audio/good_job.mp3').default, preload: true});\r\n      clapAudio.current = Sound.from({url: require('../assets/audio/clap.mp3').default, preload: true});\r\n      \r\n      let path = '';\r\n      if (window.isTestAPI) {\r\n         path = `/study${type}`;\r\n      }\r\n      else {\r\n         let t = type.toLowerCase();\r\n         if(t === 'words') t = 'word';\r\n         path = `/game/${t}/study`;\r\n      }\r\n      window.http\r\n      .get(path, {params: { stage: stage, fu_id: getCookie('fu_id'), langCode: getCookie('lang_code') }})\r\n      .then(({ data }) => {\r\n         let payload: any = { stage: stage, studyData: data.data, totalPage: data.data.list.length };\r\n         if(data.data.reStudy !== 0) {\r\n            payload.clearPages = Array.from(Array(data.data.list.length)).map((x,i) => i+1);\r\n         }\r\n         dispatch({ type: StudyActions.INIT, payload: payload});\r\n         dispatch({ type: StudyActions.CHANGE_STATUS, payload: StudyStatus.READY});\r\n      });\r\n   }, []);\r\n\r\n\r\n   if(status === StudyStatus.INIT) {\r\n      return null;\r\n   }\r\n\r\n   return (\r\n      <HelmetProvider>\r\n         <CommonLayout\r\n            contentWidth={CONTENT_WIDTH}\r\n            contentHeight={CONTENT_HEIGHT}>\r\n            <Helmet>\r\n               <title>{title}</title>\r\n            </Helmet>\r\n            <div id=\"content\">\r\n               <Transition  \r\n                  nodeRef={introRef} \r\n                  in={status === StudyStatus.READY}\r\n                  timeout={{exit: 500, appear: 0}}\r\n                  unmountOnExit\r\n                  onExit={onIntroExit}\r\n                  onExited={onIntroExited}>\r\n                  <div id=\"intro\" ref={introRef}>\r\n                     <div className=\"bg\"></div>\r\n                     <div className=\"top-title\">\r\n                        {title} <span>{`STAGE ${stage}`}</span> \r\n                     </div>\r\n\r\n                     <div className=\"intro-area\">\r\n                        <div className=\"area-wrap\">\r\n                           <div className=\"intro-title\" dangerouslySetInnerHTML={{__html: studyData.stageTitle}} />\r\n                           <Ripples color=\"rgba(255,255,255,0.4)\" during={1500}>\r\n                              <button className=\"start-btn\" onClick={onClickStart}>\r\n                                 <img src={require('../assets/images/study/common/start_btn.png').default} />\r\n                              </button>\r\n                           </Ripples>\r\n                        </div>\r\n                     </div>\r\n\r\n                     <div className=\"deco\">\r\n                        <div className=\"left\"></div>\r\n                        <div className=\"right\"></div>\r\n                     </div>\r\n\r\n                     <div className=\"bottom-guide\">\r\n                        <img src={require(`../assets/images/study/${type.toLowerCase()}/notice_${studyData.langCode}.png`).default} />\r\n                     </div>\r\n                  </div>\r\n               </Transition>\r\n\r\n               <Transition  \r\n                  nodeRef={studyRef}\r\n                  in={status !== StudyStatus.RESULT}\r\n                  timeout={{ exit: 1000, appear: 0 }}\r\n                  unmountOnExit>\r\n                  <div ref={studyRef} id=\"study\">\r\n                     <div className=\"bg\"></div>\r\n                     <div className=\"title-bar\">\r\n                        <div className=\"title-wrap\">\r\n                           <div className=\"text-con\">\r\n                              {`STAGE ${stage} : `}<span dangerouslySetInnerHTML={{__html: studyData.stageTitle}}></span>\r\n                           </div>\r\n                           <div className=\"page-con\">\r\n                              <span>{currentPage}</span> / {totalPage}\r\n                           </div>\r\n                        </div>\r\n                     </div>\r\n\r\n                     <div className=\"study-lists\" ref={listConRef}>\r\n                        { studyData.list.map((li: any, i: number) => (\r\n                           <div key={`study-list-${i}`} \r\n                              ref={el => listRef.current[i]=el!}\r\n                              className=\"study-list hidden\"\r\n                              style={{left: getContentX(indexAr.current[i])}}>\r\n                              {studyElem(i+1)}\r\n                           </div>\r\n                        ))}\r\n                     </div>\r\n                     \r\n                     <div className={`page-btns ${status === StudyStatus.STUDY_TRANSITION || status === StudyStatus.RESULT ? 'disable' : ''}`}>\r\n                        <button \r\n                           className={`prev-page-btn ${studyData.reStudy === 0 ? 'hidden': currentPage === 1 ? 'hidden' : ''}`}\r\n                           onClick={onPrevPage}>   \r\n                        </button>\r\n                        <button \r\n                           className={`next-page-btn ${(clearPages.length === 0 || clearPages[clearPages.length-1] < currentPage) ? 'hidden': ''}`}\r\n                           onClick={onNextPage}>   \r\n                        </button>\r\n                     </div>\r\n                  </div>\r\n               </Transition>\r\n\r\n               <Transition  \r\n                  nodeRef={resultRef}\r\n                  in={status === StudyStatus.RESULT}\r\n                  timeout={{ exit: 0, appear: 1000 }}\r\n                  onEnter={onResultEnter}\r\n                  unmountOnExit>\r\n                  <div ref={resultRef} id=\"result\">\r\n                     <div className=\"bg\"></div>\r\n                     <div className=\"good-job hidden\"></div>\r\n                     <div className='deco hidden'></div>\r\n                     <div className=\"circle hidden\"></div>\r\n                     <div className=\"charactor-con\">\r\n                        <div className=\"charactor hidden\"></div>\r\n                     </div>\r\n                     <div className=\"star-con\">\r\n                        <div className=\"star1\"></div>\r\n                        <div className=\"star2\"></div>\r\n                        <div className=\"star3\"></div>\r\n                     </div>\r\n                     <div className=\"bottom-con\">\r\n                        <Ripples color=\"rgba(255,88,0,0.3)\" during={1500}>\r\n                           <button \r\n                              className=\"restudy-btn disable\"\r\n                              onClick={onClickRestudy}>\r\n                              <img src={require(`../assets/images/study/common/restart_${studyData.langCode}.png`).default} />\r\n                           </button>\r\n                        </Ripples>\r\n                        {showGameBtn &&\r\n                           <Ripples color=\"rgba(62,159,221,0.3)\" during={1500}>\r\n                              <button \r\n                                 className=\"game-btn disable\"\r\n                                 onClick={onClickGame}>\r\n                                 <img src={require(`../assets/images/study/common/game_${studyData.langCode}.png`).default} />\r\n                              </button>\r\n                           </Ripples>\r\n                        }\r\n                        \r\n                     </div>\r\n                  </div>\r\n               </Transition>\r\n\r\n               <button id=\"exit-button\"\r\n                  type=\"button\"\r\n                  onClick={onExitApp} />\r\n            </div>\r\n         </CommonLayout>\r\n      </HelmetProvider>\r\n   )\r\n}\r\n\r\nexport default StudyLayout;","import { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\r\nimport { Sound } from '@pixi/sound';\r\n\r\n/*\r\n* @ PROPS\r\n*     src: 오디오 경로\r\n*     left: left 값\r\n*     top: top 값\r\n*     onBeforeClick : 클릭 시 오디오 플레이 전 콜백\r\n*     onAfterClick : 클릭 시 오디오 플레이 이후 콜백\r\n*/\r\nexport interface Props {\r\n   src: string;\r\n   left?: string;\r\n   top?: string;\r\n   onBeforeClick?: () => void;\r\n   onAfterClick?: () => void;\r\n   disabled: boolean;\r\n}\r\n\r\n/*\r\n* @ REFS\r\n*     stop: 오디오가 플레이 중일때 정지\r\n*/\r\nexport interface Refs {\r\n   stop: () => void;\r\n}\r\n\r\nconst AudioButton = forwardRef<Refs, Props>(({ \r\n   src, \r\n   disabled, \r\n   left = '0px', \r\n   top = '0px', \r\n   onBeforeClick, \r\n   onAfterClick \r\n}, ref) => {\r\n\r\n   const [isPlay, setIsPlay] = useState<boolean>(false);\r\n   const audio = useRef<Sound | undefined>(undefined);\r\n   const onBtnClick = useCallback(() => {\r\n      if(!isPlay) {\r\n         if(onBeforeClick) onBeforeClick();\r\n         setIsPlay(true);\r\n         audio.current?.play(() => setIsPlay(false));\r\n         if(onAfterClick) onAfterClick();\r\n      }\r\n   },[onBeforeClick, onAfterClick, isPlay]);\r\n\r\n   useImperativeHandle(ref, () => ({\r\n      stop: () => {\r\n         audio.current?.stop();\r\n         setIsPlay(false);\r\n      }\r\n   }));\r\n\r\n   useEffect(() => {\r\n      if(!disabled) {\r\n         if(audio.current){\r\n            audio.current?.destroy();\r\n            audio.current = undefined;\r\n         }\r\n         audio.current = Sound.from({url: src, preload: true});\r\n         return () => {\r\n            audio.current?.destroy();\r\n            audio.current = undefined;\r\n         }\r\n      }\r\n   }, [disabled]);\r\n\r\n   return (\r\n      <button \r\n         style={{ left, top }}\r\n         className={`audio-button ${!disabled && isPlay ? 'active' : ''} ${disabled ? 'disabled' : ''}`}\r\n         onClick={onBtnClick}> \r\n      </button>\r\n   )\r\n});\r\n\r\nexport default AudioButton;","var map = {\n\t\"./alphabet/_right_deco.png\": 610,\n\t\"./alphabet/left_deco.png\": 611,\n\t\"./alphabet/notice_en_US.png\": 612,\n\t\"./alphabet/notice_ja_JP.png\": 613,\n\t\"./alphabet/notice_ko_KR.png\": 614,\n\t\"./alphabet/notice_zh_CN.png\": 615,\n\t\"./alphabet/notice_zh_HK.png\": 616,\n\t\"./alphabet/notice_zh_TW.png\": 617,\n\t\"./alphabet/quiz_view.png\": 618,\n\t\"./alphabet/quiz_view_blur.png\": 619,\n\t\"./alphabet/quiz_view_on.png\": 620,\n\t\"./alphabet/right_deco.png\": 621,\n\t\"./common/audio_default.png\": 622,\n\t\"./common/audio_off.png\": 623,\n\t\"./common/audio_on.png\": 624,\n\t\"./common/close_btn.png\": 625,\n\t\"./common/game_en_US.png\": 127,\n\t\"./common/game_ja_JP.png\": 128,\n\t\"./common/game_ko_KR.png\": 129,\n\t\"./common/game_zh_CN.png\": 130,\n\t\"./common/game_zh_HK.png\": 131,\n\t\"./common/game_zh_TW.png\": 132,\n\t\"./common/intro_bg.png\": 626,\n\t\"./common/page_next.png\": 627,\n\t\"./common/page_prev.png\": 628,\n\t\"./common/restart_en_US.png\": 133,\n\t\"./common/restart_ja_JP.png\": 134,\n\t\"./common/restart_ko_KR.png\": 135,\n\t\"./common/restart_zh_CN.png\": 136,\n\t\"./common/restart_zh_HK.png\": 137,\n\t\"./common/restart_zh_TW.png\": 138,\n\t\"./common/result_bg.png\": 629,\n\t\"./common/result_charactor.png\": 630,\n\t\"./common/result_circle.png\": 631,\n\t\"./common/result_deco.png\": 632,\n\t\"./common/result_title.png\": 633,\n\t\"./common/star1.png\": 634,\n\t\"./common/star2.png\": 635,\n\t\"./common/star3.png\": 636,\n\t\"./common/start_btn.png\": 139,\n\t\"./common/study_bg.png\": 637,\n\t\"./common/title_bar_bg.png\": 638,\n\t\"./common/top_bg@3x.png\": 639,\n\t\"./letterteams/box_glow.png\": 640,\n\t\"./letterteams/box_line.png\": 641,\n\t\"./letterteams/item_box.png\": 642,\n\t\"./letterteams/left_deco.png\": 643,\n\t\"./letterteams/notice_en_US.png\": 644,\n\t\"./letterteams/notice_ja_JP.png\": 645,\n\t\"./letterteams/notice_ko_KR.png\": 646,\n\t\"./letterteams/notice_zh_CN.png\": 647,\n\t\"./letterteams/notice_zh_HK.png\": 648,\n\t\"./letterteams/notice_zh_TW.png\": 649,\n\t\"./letterteams/right_deco.png\": 650,\n\t\"./letterteams/word_box_bg.png\": 651,\n\t\"./letterteams/word_box_bg_clear.png\": 652,\n\t\"./letterteams/word_box_bg_on.png\": 653,\n\t\"./phonics/left_deco.png\": 654,\n\t\"./phonics/notice_en_US.png\": 655,\n\t\"./phonics/notice_ja_JP.png\": 656,\n\t\"./phonics/notice_ko_KR.png\": 657,\n\t\"./phonics/notice_zh_CN.png\": 658,\n\t\"./phonics/notice_zh_HK.png\": 659,\n\t\"./phonics/notice_zh_TW.png\": 660,\n\t\"./phonics/right_deco.png\": 661,\n\t\"./sightwords/block_back.png\": 662,\n\t\"./sightwords/block_back_on.png\": 663,\n\t\"./sightwords/block_correct_1_blue.png\": 664,\n\t\"./sightwords/block_correct_1_green.png\": 665,\n\t\"./sightwords/block_correct_1_red.png\": 666,\n\t\"./sightwords/block_correct_1_yellow.png\": 667,\n\t\"./sightwords/block_correct_2_blue.png\": 668,\n\t\"./sightwords/block_correct_2_green.png\": 669,\n\t\"./sightwords/block_correct_2_red.png\": 670,\n\t\"./sightwords/block_correct_2_yellow.png\": 671,\n\t\"./sightwords/block_large_1_blue.png\": 672,\n\t\"./sightwords/block_large_1_green.png\": 673,\n\t\"./sightwords/block_large_1_red.png\": 674,\n\t\"./sightwords/block_large_1_yellow.png\": 675,\n\t\"./sightwords/block_large_2_blue.png\": 676,\n\t\"./sightwords/block_large_2_green.png\": 677,\n\t\"./sightwords/block_large_2_red.png\": 678,\n\t\"./sightwords/block_large_2_yellow.png\": 679,\n\t\"./sightwords/block_left_off.png\": 680,\n\t\"./sightwords/block_left_on.png\": 681,\n\t\"./sightwords/block_right_off.png\": 682,\n\t\"./sightwords/block_right_on.png\": 683,\n\t\"./sightwords/block_wrong_1_blue.png\": 684,\n\t\"./sightwords/block_wrong_1_green.png\": 685,\n\t\"./sightwords/block_wrong_1_red.png\": 686,\n\t\"./sightwords/block_wrong_1_yellow.png\": 687,\n\t\"./sightwords/block_wrong_2_blue.png\": 688,\n\t\"./sightwords/block_wrong_2_green.png\": 689,\n\t\"./sightwords/block_wrong_2_red.png\": 690,\n\t\"./sightwords/block_wrong_2_yellow.png\": 691,\n\t\"./sightwords/left_deco.png\": 692,\n\t\"./sightwords/notice_en_US.png\": 693,\n\t\"./sightwords/notice_ja_JP.png\": 694,\n\t\"./sightwords/notice_ko_KR.png\": 695,\n\t\"./sightwords/notice_zh_CN.png\": 696,\n\t\"./sightwords/notice_zh_HK.png\": 697,\n\t\"./sightwords/notice_zh_TW.png\": 698,\n\t\"./sightwords/right_deco.png\": 699,\n\t\"./sightwords/round_glow.png\": 700,\n\t\"./sightwords/star1.png\": 701,\n\t\"./sightwords/star2.png\": 702,\n\t\"./sightwords/star3.png\": 703,\n\t\"./sightwords/star4.png\": 704,\n\t\"./sightwords/star5.png\": 705,\n\t\"./words/Freddy.png\": 706,\n\t\"./words/left_deco.png\": 707,\n\t\"./words/notice_en_US.png\": 708,\n\t\"./words/notice_ja_JP.png\": 709,\n\t\"./words/notice_ko_KR.png\": 710,\n\t\"./words/notice_zh_CN.png\": 711,\n\t\"./words/notice_zh_HK.png\": 712,\n\t\"./words/notice_zh_TW.png\": 713,\n\t\"./words/right_deco.png\": 714,\n\t\"./words/star.png\": 715\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 735;","var map = {\n\t\"./restart_en_US.png\": 133,\n\t\"./restart_ja_JP.png\": 134,\n\t\"./restart_ko_KR.png\": 135,\n\t\"./restart_zh_CN.png\": 136,\n\t\"./restart_zh_HK.png\": 137,\n\t\"./restart_zh_TW.png\": 138\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 736;","var map = {\n\t\"./game_en_US.png\": 127,\n\t\"./game_ja_JP.png\": 128,\n\t\"./game_ko_KR.png\": 129,\n\t\"./game_zh_CN.png\": 130,\n\t\"./game_zh_HK.png\": 131,\n\t\"./game_zh_TW.png\": 132\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 737;","import { FC, ReactElement, useEffect, useRef, useCallback } from \"react\";\r\nimport { addClass, removeClass, distance, elementIndex } from \"../../utils\";\r\nimport { gsap, Cubic } from \"gsap\";\r\nimport { Draggable as GSAPDraggable } from \"gsap/Draggable\";\r\nimport { Sound } from \"@pixi/sound\";\r\n\r\n/*\r\n* @ PROPS\r\n*     areaAr: 드래그 영역 값 배열 \r\n*     dragAr: 드래그 아이텝 값 배열\r\n*     areaElm: 드래그 영역 element\r\n*     dragElm :드래그 아이템 element\r\n*     onCorrect : 드래그 정답 시 콜백\r\n*     onWorng : 드래그 오답 시 콜백\r\n*/\r\nexport interface Props {\r\n   areaAr: string[] | number[];\r\n   dragAr: string[] | number[];\r\n   areaElm?: ReactElement[];\r\n   dragElm?: ReactElement[];\r\n   onDragStart?: ( item: HTMLDivElement ) => void;\r\n   onCorrect?: (item: HTMLDivElement, area: HTMLDivElement) => void;\r\n   onWrong?: (item: HTMLDivElement) => void;\r\n   padding?: number | string;\r\n}\r\n\r\n\r\nconst Draggable: FC<Props> = ({ \r\n   areaAr, \r\n   dragAr, \r\n   areaElm, \r\n   dragElm,\r\n   onDragStart,\r\n   onCorrect,\r\n   onWrong,\r\n   padding \r\n}) => {\r\n\r\n   const dragContainer = useRef<HTMLDivElement>(null);\r\n   const dragItems = useRef<HTMLDivElement[]>([]);\r\n   const dragAreas = useRef<HTMLDivElement[]>([]);\r\n   const draggables = useRef<GSAPDraggable[]>();\r\n   const clickAudio = useRef<Sound>();\r\n\r\n   \r\n\r\n   const checkHitArea = useCallback(( draggable: any, dragItem: HTMLDivElement): [boolean, HTMLDivElement] | null => {\r\n      for(let i=0; i<dragAreas.current.length; i++) {\r\n         var areaItem = dragAreas.current[i];\r\n         if(getComputedStyle(areaItem)['visibility'] === 'hidden' || getComputedStyle(areaItem)['display'] === 'none') continue;\r\n         if(draggable.hitTest(areaItem, padding)){\r\n            if(areaItem.dataset.correct === dragItem.dataset.correct) {\r\n               return [true, areaItem];\r\n            } else {\r\n               return [false, areaItem];\r\n            }\r\n         }\r\n      }\r\n      return null;\r\n   }, []);\r\n\r\n\r\n   const returnDrag = useCallback((traget, dragItem) => {\r\n      const dist = distance(traget.x, traget.y, 0, 0);\r\n      gsap.to(dragItem, dist * 0.002, {\r\n         x:0, y: 0, \r\n         ease:Cubic.easeOut, \r\n         onComplete: ()=>{\r\n            draggables.current!.forEach(draggble => draggble.enable());\r\n         }\r\n      });\r\n   },[]);\r\n\r\n   \r\n   useEffect(() => {\r\n      clickAudio.current = Sound.from({url: require('../../assets/audio/click.mp3').default, preload: true});\r\n      gsap.to(dragItems.current, 0.6, {y: 0, force3D: true, ease: Cubic.easeInOut, onComplete: () => {\r\n         draggables.current = GSAPDraggable.create(dragItems.current, {\r\n            type: 'x,y',\r\n            bounds: '#content',\r\n            onDragStart: function ( e ) {\r\n               const idx = elementIndex(this.target);\r\n               const otherDraggable = draggables.current!.filter((x, i) => i !== idx);\r\n               otherDraggable.forEach(draggble => draggble.disable());\r\n               clickAudio.current!.play();\r\n               if(onDragStart){\r\n                  onDragStart(dragItems.current[idx]);\r\n               }\r\n            },\r\n            onDrag: function ( e ) {\r\n               const idx = elementIndex(this.target);\r\n               const dragItem = dragItems.current[idx];\r\n               const hitArea = checkHitArea(this, dragItem);\r\n               dragAreas.current.forEach(area => removeClass(area, 'hit'));\r\n               if(hitArea) {\r\n                  if(hitArea[1]) {\r\n                     addClass(hitArea[1], 'hit');\r\n                  }\r\n               }\r\n            },\r\n            onDragEnd: function ( e ){\r\n               const idx = elementIndex(this.target);\r\n               const dragItem = dragItems.current[idx];\r\n               this.disable();\r\n               const hitArea = checkHitArea(this, dragItem);\r\n               dragAreas.current.forEach(area => removeClass(area, 'hit'));\r\n               if(hitArea) {\r\n                  if(hitArea[0]) {\r\n                     addClass(dragItem, 'active');\r\n                     addClass(hitArea[1], 'active');\r\n                     draggables.current!.forEach(draggble => draggble.enable());\r\n                     if(onCorrect) {\r\n                        onCorrect(dragItems.current[idx], hitArea[1]);\r\n                     }\r\n                  } else {\r\n                     returnDrag(this, dragItem);\r\n                     if(onWrong) {\r\n                        onWrong(dragItem);\r\n                     }\r\n                  }\r\n               } else {\r\n                  returnDrag(this, dragItem);\r\n               }\r\n            }\r\n         });\r\n      }});\r\n\r\n      return () => {\r\n         gsap.killTweensOf(dragContainer.current);\r\n         draggables.current?.forEach( drag => drag.kill());\r\n      }\r\n   }, []);\r\n\r\n   return (\r\n      <div ref={dragContainer} className=\"draggable\">\r\n         <div className=\"drag-areas\">\r\n            {areaAr.map((correct, i) => (\r\n               <div key={`drag-area-${i}`} \r\n                  ref={ref => ref && (dragAreas.current[i]=ref)}\r\n                  className=\"drag-area\"\r\n                  data-correct={correct}>\r\n                  {areaElm && areaElm[i]}\r\n               </div>\r\n            ))}\r\n         </div>\r\n         <div className=\"drag-items\">\r\n            {dragAr.map((correct, i) => (\r\n               <div key={`drag-item-${i}`} \r\n                  ref={ref => ref && (dragItems.current[i]=ref)}\r\n                  className=\"drag-item\"\r\n                  data-correct={correct}>\r\n                  {dragElm && dragElm[i]}\r\n               </div>\r\n            ))}\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n\r\nexport default Draggable;"],"sourceRoot":""}